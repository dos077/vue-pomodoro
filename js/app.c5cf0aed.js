(function(t){function e(e){for(var r,a,s=e[0],c=e[1],l=e[2],d=0,f=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={app:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/vue-pomodoro/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main centerd"},[n("div",{staticClass:"clock-container"},[n("watch-face")],1)])},i=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"clock-face"},[n("figure",{staticClass:"minute-hand",style:"transform: rotate("+t.minHand+"deg)"}),n("figure",{staticClass:"second-hand",style:"animation: "+t.secondAnimation}),n("figure",{staticClass:"hand-anchor"}),n("dial",{attrs:{dialId:"rest"}}),n("dial",{attrs:{dialId:"work"}}),n("gauge"),n("controls"),t._l(t.getSixty(),(function(e){return n("div",{key:e,staticClass:"mark"},[null!==t.dragSource?n("span",{staticClass:"dial-target",on:{mouseover:function(n){return t.dragEnter(6*e)}}}):t._e()])})),n("audio-player")],2)},s=[],c=n("5530"),l=n("2f62"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("figure",{staticClass:"dial",style:"transform: rotate("+t.rotation+"deg)",attrs:{id:t.dialId+"Dial"},on:{mousedown:t.onDrag,touchstart:t.onDrag}},[n("span",{staticClass:"dial-point",style:t.dragOn?"transform: scale(2,3); opacity: 0.6":"",attrs:{id:t.dialId+"Point"}})])},d=[],f=(n("99af"),n("a15b"),n("ac1f"),n("1276"),function(t){var e,n;return t<=45?(e=0,n=Math.tan(t*Math.PI/180)):(n=1,e=1-Math.tan((90-t)*Math.PI/180)),{x:n,y:e}}),g=function(t){var e,n,r=50;if(t<=90){var o=f(t);e=r*(1+o.x),n=r*o.y}else if(t<=180){var i=f(t-90);e=r*(2-i.y),n=r*(1+i.x)}else if(t<=270){var a=f(t-180);e=r*(1-a.x),n=r*(2-a.y)}else{var s=f(t-270);e=r*s.y,n=r*(1-s.x)}return"".concat(e,"% ").concat(n,"%")},p=function(t,e){var n=["50% 50%"];return n.push(g(t)),t<45&&e>45&&n.push("100% 0"),t<135&&e>135&&n.push("100% 100%"),t<225&&e>225&&n.push("0 100%"),t<315&&e>315&&n.push("0 0"),n.push(g(e)),"polygon("+n.join(", ")+")"},h=function(t){var e=window.getComputedStyle(t).getPropertyValue("transform"),n=e.substr(7).split(","),r=Math.acos(n[0])*(180/Math.PI);return r=Math.round(r),n[1]<=n[2]&&(r=360-r),r},m=function(t,e,n,r){var o=10*t+("work"===e?n:0);return!(o>3600)&&("rest"!==e||t>r/10)},v={findClipPath:p,findRotation:h,isInRange:m},k=v.findRotation,w={name:"Dial",props:{dialId:String},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["dragSource","restSec","workSec","dragTarget"])),{},{dragOn:function(){return this.dragSource&&this.dragSource===this.dialId},rotation:function(){return this.dragOn&&this.dragTarget?this.dragTarget:"work"===this.dialId?this.workSec/10:(this.workSec+this.restSec)/10},pointerStyle:function(){var t=this.dragOn?"scale(2,3)":"",e=this.dragOn?"0.6":"";return"transform: ".concat(t,", opacity: ").concat(e)}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["dragStart","dragEnd","dragEnter"])),{},{onDrag:function(){this.dragStart(this.dialId),document.addEventListener("mouseup",this.doneDrag),document.addEventListener("touchend",this.doneDrag),document.addEventListener("touchmove",this.touchMoveHandler)},touchMoveHandler:function(t){var e=t.changedTouches[0].pageX,n=t.changedTouches[0].pageY,r=document.elementFromPoint(e,n);if(r&&r.parentNode){var o=k(r.parentNode);this.dragEnter(o)}},doneDrag:function(){this.dragEnd(),document.removeEventListener("mouseup",this.dragEnd),document.removeEventListener("touchend",this.doneDrag),document.removeEventListener("touchmove",this.touchMoveHandler)}})},S=w,b=n("2877"),C=Object(b["a"])(S,u,d,!1,null,null,null),O=C.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("figure",{staticClass:"gauge"},[n("figure",{staticClass:"ring",style:"clipPath: "+t.findClipPath(0,t.workSec/10),attrs:{id:"main-gauge"}}),n("figure",{staticClass:"ring",style:"clipPath: "+t.findClipPath(t.workSec/10,(t.workSec+t.restSec)/10),attrs:{id:"rest-gauge"}}),t._l(t.getTwelve(),(function(t){return n("div",{key:t,staticClass:"stop"})}))],2)},j=[],A={name:"Gauge",computed:Object(c["a"])({},Object(l["c"])(["workSec","restSec"])),methods:{getTwelve:function(){for(var t=[],e=0;e<12;e++)t.push(e);return t},findClipPath:v.findClipPath}},T=A,E=Object(b["a"])(T,y,j,!1,null,null,null),P=E.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.clockController?n("figure",{staticClass:"controls"},[n("figure",{staticClass:"btn-main"},[!t.isRunning&!t.doneAlert?n("span",{staticClass:"go",attrs:{id:"startClock"},on:{click:t.clockController.start}}):t._e(),t.isRunning?n("span",{staticClass:"stop",attrs:{id:"stopClock"},on:{click:t.clockController.stop}}):t._e()]),n("figure",{staticClass:"btn-reset"},[t.isRunning?t._e():n("span",{staticClass:"stop",attrs:{id:"resetClock"},on:{click:t.clockController.reset}})]),n("figure",{staticClass:"btn-loop"},[n("span",{staticClass:"loop",class:t.loopOn?"go":"stop",attrs:{id:"loopClock"},on:{click:t.loopToggle}},[n("restore-icon",{attrs:{size:t.iconSize}})],1)])]):t._e()},_=[],x=n("5702"),I=function(t){var e=t.restTime,n=t.workTime,r=t.loop;return null!==e&&null!==n&&null!==r&&{restTime:e,workTime:n,loop:r}},L=function(t){var e=I(t);if(!e)throw Error("invalid presets");localStorage.timerPreset=JSON.stringify(e)},R=function(){if(localStorage.timerPreset){var t=I(JSON.parse(localStorage.timerPreset));if(t)return t;throw Error("invalid saved presets")}return!1},D=function(){var t,e,n,r,o=!1,i=function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;t=i,e=a,r=i+a,n=null,L({restTime:t,workTime:e,loop:o})},a=function(){var n=R();return!!n&&(t=n.restTime,e=n.workTime,o=n.loop,n)},s=function(){n=new Date,n.setSeconds(n.getSeconds()+r)},c=function(){var i=e,a=t,s=new Date;if(n){if(o){r=t+e;while(n<s)n.setSeconds(n.getSeconds()+r)}r=Math.round((n-s)/1e3),r>a?i=r-a:(i=0,a=r)}return{rest:a,work:i,total:r}},l=function(){return t+e-c().total},u=function(){c(),n=null},d=function(n){return n&&(o=!o,L({restTime:t,workTime:e,loop:o})),o};return{set:i,load:a,start:s,stop:u,timeLeft:c,timeElapse:l,setLoop:d}},z=D,H=function(t,e){var n,r,o,i=e.setMinutes,a=e.startClock,s=e.stopClock,c=e.setAnimation,l=e.setWorkAlert,u=e.setAlert,d=function(){var e=t.timeLeft().work,n=t.timeLeft().rest;!r&&e>0&&e<15?r=setTimeout((function(){l(!0),r=setTimeout((function(){l(!1),r=null}),7e3)}),1e3*e):!r&&n>0&&n<15&&(r=setTimeout((function(){u(!0),t.setLoop()?r=setTimeout((function(){u(!1),r=null}),7e4):(s(),r=null)}),1e3*n))},f=function(t){if(!o&&t<=11&&t>0){var e=1e3*t-200;o=setTimeout((function(){h(!0),o=null}),e)}},g=function(){var e=t.timeLeft().total;if(p(t.timeElapse()),e<0)v();else{var n=e%60;f(n),d()}},p=function(t){var e=Math.floor(t/10),n=1*e;i(n)},h=function(){c(!1),setTimeout((function(){c(!0)}),100)},m=function(){t.start(),g(),c(!0),a(),n=setInterval(g,1e4)},v=function(){clearInterval(n),clearTimeout(r),clearTimeout(o),t.stop(),s()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];l(!1),u(!1),t.set(),g(),h(!1),!0===e&&m()};return{start:m,stop:v,reset:k}},W=H;function $(t){var e=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return t*e/100}function N(t){var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0);return t*e/100}function F(t){return Math.min($(t),N(t))}var J=z(),G={name:"Controls",data:function(){return{clockController:null,loopOn:null,iconSize:15}},components:{RestoreIcon:x["a"]},computed:Object(c["a"])({},Object(l["c"])(["isRunning","workSec","restSec","doneAlert"])),watch:{workSec:{handler:function(t){J.set(this.restSec,t),this.clockController.reset()}},restSec:{handler:function(t){J.set(t,this.workSec),this.clockController.reset()}}},mounted:function(){var t=J.load();t?(this.loadPrefs(t),this.loopOn=t.loop):J.set(this.restSec,this.workSec);var e={};e.startClock=this.startClock,e.stopClock=this.stopClock,e.setMinutes=this.setMinutes,e.setAnimation=this.setAnimation,e.setAlert=this.setAlert,e.setWorkAlert=this.setWorkAlert,this.clockController=W(J,e),this.getIconSize(),window.addEventListener("resize",this.getIconSize)},destroyed:function(){window.removeEventListener("resize",this.getIconSize)},methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["startClock","stopClock","setMinutes","setAnimation","setAlert","setWorkAlert","loadPrefs"])),{},{loopToggle:function(){this.loopOn=J.setLoop(!0)},getIconSize:function(){var t=4.5,e=Math.min(15,F(2));this.iconSize=e*t}})},q=G,B=Object(b["a"])(q,M,_,!1,null,null,null),V=B.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},Y=[],K=new Audio("./computermagic.mp3"),Q=new Audio("./bigben.mp3"),U={name:"AudioPlayer",computed:Object(c["a"])({},Object(l["c"])(["doneAlert","workAlert"])),watch:{doneAlert:{handler:function(t){t?K.play():(K.pause(),K.currentTime=0)}},workAlert:{handler:function(t){t?Q.play():(Q.pause(),Q.currentTime=0)}}}},Z=U,tt=Object(b["a"])(Z,X,Y,!1,null,null,null),et=tt.exports,nt={name:"WatchFace",components:{Dial:O,Gauge:P,Controls:V,AudioPlayer:et},computed:Object(c["a"])(Object(c["a"])({},Object(l["c"])(["isRunning","isAnimate","minHand","dragSource","isDone"])),{},{secondAnimation:function(){return this.isAnimate?"clock 60s steps(300) infinite "+(this.isRunning?"running":"paused"):"none"}}),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["dragEnter"])),{},{getSixty:function(){for(var t=[],e=0;e<60;e++)t.push(e);return t}})},rt=nt,ot=Object(b["a"])(rt,a,s,!1,null,null,null),it=ot.exports,at={name:"App",components:{WatchFace:it},data:function(){return{}}},st=at,ct=(n("5c0b"),Object(b["a"])(st,o,i,!1,null,null,null)),lt=ct.exports,ut={workSec:1500,restSec:300,dragSource:null,dragTarget:null,isRunning:!1,isAnimate:!1,minHand:0,workAlert:!1,doneAlert:!1},dt=v.isInRange,ft={dragStart:function(t,e){t.dragSource=e},dragEnd:function(t){null!==t.dragTarget&&("work"===t.dragSource?t.workSec=10*t.dragTarget:t.restSec=10*t.dragTarget-t.workSec),t.dragSource=null,t.dragTarget=null},dragEnter:function(t,e){var n=t.dragSource,r=t.workSec,o=t.restSec;dt(e,n,o,r)&&(t.dragTarget=e)},startClock:function(t){t.isRunning=!0},stopClock:function(t){t.isRunning=!1},setAnimation:function(t,e){t.isAnimate=e},setMinutes:function(t,e){t.minHand=e},setAlert:function(t,e){t.doneAlert=e},setWorkAlert:function(t,e){t.workAlert=e},loadPrefs:function(t,e){t.restSec=e.restTime,t.workSec=e.workTime}};r["a"].use(l["a"]);var gt=new l["a"].Store({state:ut,mutations:ft}),pt=n("9483");Object(pt["a"])("".concat("/vue-pomodoro/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.","For more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),new r["a"]({store:gt,render:function(t){return t(lt)},created:function(){if(sessionStorage.redirect){var t=sessionStorage,e=t.redirect;delete sessionStorage.redirect,this.$router.push(e)}}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var r=n("9c0c"),o=n.n(r);o.a},"9c0c":function(t,e,n){}});
//# sourceMappingURL=app.c5cf0aed.js.map